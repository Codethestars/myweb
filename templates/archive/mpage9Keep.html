<!DOCTYPE html>
<html>
<!-- [Previous head content remains the same until style section] -->
<style>
    /* [Previous styles remain, adding new ones below] */
    
    .input-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .label-row {
        display: flex;
        justify-content: space-around;
        margin-bottom: 10px;
    }

    .input-label {
        width: 200px;
        text-align: center;
        color: #0b3557;
        font-weight: bold;
        min-height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .input-row {
        display: flex;
        justify-content: space-around;
        align-items: center;
    }

    select {
        width: 200px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 1rem;
        background-color: white;
    }

    .result-row {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 10px;
    }

    .result-item {
        flex: 1;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 4px;
        border-left: 4px solid #0b3557;
        text-align: center;
    }

    .result-label {
        font-weight: bold;
        color: #0b3557;
        margin-bottom: 5px;
        min-height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .result-value {
        font-size: 1.1rem;
    }

    #calculatorForm {
        margin-bottom: 20px;
    }

    button {
        max-width: 200px;
        margin: 20px auto;
        display: block;
    }
</style>

<!-- [Header and breadcrumb remain the same] -->

<div class="content">
    <div class="input-container">
        <form id="calculatorForm">
            <div class="label-row">
                <div class="input-label">Dry Bulb<br>Temperature (°F)</div>
                <div class="input-label">Relative<br>Humidity (%)</div>
            </div>
            <div class="input-row">
                <select id="dry_bulb" name="dry_bulb" required>
                    <option value="">Select Temperature</option>
                </select>
                <select id="rel_humidity" name="rel_humidity" required>
                    <option value="">Select Humidity</option>
                </select>
            </div>
            <button type="submit">Calculate</button>
        </form>
    </div>

    <div id="error" class="error-message"></div>
    
    <div id="result" class="result-section">
        <div class="result-row">
            <div class="result-item">
                <div class="result-label">Dew Point<br>Temperature (°F)</div>
                <div class="result-value" id="dew_point"></div>
            </div>
            <div class="result-item">
                <div class="result-label">Wet Bulb<br>Temperature (°F)</div>
                <div class="result-value" id="wet_bulb"></div>
            </div>
            <div class="result-item">
                <div class="result-label">Humidity Ratio<br>(LB/LB)</div>
                <div class="result-value" id="humidity_ratio"></div>
            </div>
            <div class="result-item">
                <div class="result-label">Enthalpy<br>(BTU/LB OF DRY AIR)</div>
                <div class="result-value" id="enthalpy"></div>
            </div>
            <div class="result-item">
                <div class="result-label">Specific Volume<br>(CU FT/LB OF DRY AIR)</div>
                <div class="result-value" id="specific_volume"></div>
            </div>
        </div>
    </div>
</div>

<script>
// Fetch available values when page loads
fetch('/get_available_values')
    .then(response => response.json())
    .then(data => {
        const dryBulbSelect = document.getElementById('dry_bulb');
        const relHumiditySelect = document.getElementById('rel_humidity');
        
        // Populate dry bulb dropdown
        data.dry_bulb_values.forEach(value => {
            const option = document.createElement('option');
            option.value = value;
            option.textContent = value;
            dryBulbSelect.appendChild(option);
        });
        
        // Populate relative humidity dropdown
        data.rel_humidity_values.forEach(value => {
            const option = document.createElement('option');
            option.value = value;
            option.textContent = value;
            relHumiditySelect.appendChild(option);
        });
    });

document.getElementById('calculatorForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const resultDiv = document.getElementById('result');
    const errorDiv = document.getElementById('error');
    
    fetch('/calculate_psychrometric', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            errorDiv.textContent = data.error;
            errorDiv.style.display = 'block';
            resultDiv.style.display = 'none';
        } else {
            errorDiv.style.display = 'none';
            resultDiv.style.display = 'block';
            
            document.getElementById('dew_point').textContent = data.data.dew_point;
            document.getElementById('wet_bulb').textContent = data.data.wet_bulb;
            document.getElementById('humidity_ratio').textContent = data.data.humidity_ratio;
            document.getElementById('enthalpy').textContent = data.data.enthalpy;
            document.getElementById('specific_volume').textContent = data.data.specific_volume;
        }
    })
    .catch(error => {
        errorDiv.textContent = 'An error occurred. Please try again.';
        errorDiv.style.display = 'block';
        resultDiv.style.display = 'none';
    });
});
</script>

<!-- [Footer remains the same] -->